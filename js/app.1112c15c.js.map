{"version":3,"sources":["webpack:///src/components/header.vue","webpack:///./src/components/header.vue?1097","webpack:///./src/components/header.vue","webpack:///./src/util/db.js","webpack:///src/components/trip-new.vue","webpack:///./src/components/trip-new.vue?3dbd","webpack:///./src/components/trip-new.vue","webpack:///./src/model/trip.js","webpack:///src/components/trip-load.vue","webpack:///./src/components/trip-load.vue?2377","webpack:///./src/components/trip-load.vue","webpack:///src/components/trip-dest.vue","webpack:///./src/components/trip-dest.vue?bdc4","webpack:///./src/components/trip-dest.vue","webpack:///src/components/trip-summary.vue","webpack:///./src/components/trip-summary.vue?03a5","webpack:///./src/components/trip-summary.vue","webpack:///src/components/trip-plan.vue","webpack:///./src/components/trip-plan.vue?b446","webpack:///./src/components/trip-plan.vue","webpack:///./src/util/map-layer.js","webpack:///./src/util/graph.js","webpack:///src/App.vue","webpack:///./src/App.vue?374e","webpack:///./src/App.vue","webpack:///./src/util/mock.js","webpack:///./src/store/index.js","webpack:///./src/main.js"],"names":["header","computed","objectSpread_default","Object","vuex_esm","methods","googleSignin","googleSignout","header_render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","padding","justify-content","background","flex","text-align","_v","font-size","_s","user","name","on","click","$event","setShowDestDialog","setShowPlanDialog","setShowNewTripDialog","setShowLoadTripDialog","loggedIn","signin","_e","signout","staticRenderFns","injectStyle","context","__webpack_require__","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","component_normalizer","components_header","FIREBASE_CONFIG","apiKey","authDomain","databaseURL","firebase","initializeApp","database","auth","GoogleAuthProvider","path","ref","once","value","set","trip_new","toObj","trip_new_render","class","show","showNewTripDialog","opacity","_m","directives","rawName","expression","attrs","type","placeholder","domProps","input","target","composing","save","cancel","trip_new_staticRenderFns","trip_new___vue_template_functional__","trip_new___vue_styles__","trip_new___vue_scopeId__","trip_new___vue_module_identifier__","trip_new_Component","components_trip_new","trip_Trip","Trip","classCallCheck_default","plans","places","updated","view","plan","push","place","placeId","r","_","find","d","_this","max","map","list","listPlan","sum","item","data","duration","t","isNumber","d3","timeFormat","i","itineraries","length","travels","text","JSON","parse","loadJSON","sanitize","forEach","Date","getTime","trip_load","val","_this2","p","values","trip","trip_load_render","showLoadTripDialog","_l","idx","key","cursor","load","trip_load_staticRenderFns","trip_load___vue_template_functional__","trip_load___vue_styles__","trip_load___vue_scopeId__","trip_load___vue_module_identifier__","trip_load_Component","components_trip_load","debounce","func","wait","immediate","timeout","arguments","args","place_id","v","predict","searchStrModel","trip_dest_render","showDestDialog","c","display","select","formatted_address","photos","src","getUrl","maxHeight","trip_dest_staticRenderFns","trip_dest___vue_template_functional__","trip_dest___vue_styles__","trip_dest___vue_scopeId__","trip_dest___vue_module_identifier__","trip_dest_Component","trip_dest","components_trip_dest","trip_summary","trip_summary_render","width","height","id","switchTo","active","href","colspan","_f","max-height","overflow-y","currentPlan","margin-left","padding-left","border-left","editPlan","deletePlan","margin-top","position","border","top","left","border-radius","findPlace","isPlaceUsed","color","deletePlace","trip_summary_staticRenderFns","trip_summary_injectStyle","trip_summary___vue_template_functional__","trip_summary___vue_styles__","trip_summary___vue_scopeId__","trip_summary___vue_module_identifier__","trip_summary_Component","components_trip_summary","trip_plan","from","to","trip_plan_render","showPlanDialog","$set","flex-direction","addRow","change","$$selectedVal","Array","prototype","filter","call","options","o","selected","_value","multiple","disabled","getTripPlaces","size","travel","trip_plan_staticRenderFns","rows","trip_plan___vue_template_functional__","trip_plan___vue_styles__","trip_plan___vue_scopeId__","trip_plan___vue_module_identifier__","trip_plan_Component","components_trip_plan","map_layer_MapLayer","MapLayer","mapObjects","usePathIcon","obj","setMap","renderPlans","renderPlaces","palette","lineSymbol","strokeOpacity","scale","pIdx","poly","it","lat","geometry","location","lng","ppath","google","maps","Polyline","geodesic","strokeColor","strokeWeight","icons","icon","offset","repeat","bounds","LatLngBounds","Circle","center","fillColor","radius","extend","fitBounds","translate","x","y","graph_Graph","Graph","bbox","node","getBoundingClientRect","svg","append","attr","margin","w","h","chart","fn","clickFn","selectAll","remove","maxLength","bufferedMaxLength","unit","planH","node_modules_d3","range","domain","start","style","planIdx","group","datum","darker","App","TripHeader","TripNew","TripLoad","TripDest","TripSummary","TripPlan","AutocompleteService","placeService","autocompleteService","App_render","App_staticRenderFns","min-height","App_injectStyle","App___vue_template_functional__","App___vue_styles__","App___vue_scopeId__","App___vue_module_identifier__","App_Component","src_App","mock_Mock","vue_runtime_esm","use","store","Store","state","mockLoggedInUser","searchStr","currentPlanIdx","getters","actions","setSearchStr","_ref","s","commit","_ref2","_ref3","console","log","_ref4","mode","_ref5","setTrip","_ref6","setCurrentPlan","_ref7","setCurrentPlanIdx","_ref8","setPlaceService","_ref9","srv","setAutocompleteService","_ref10","getPlaceDetail","_ref11","Promise","resolve","reject","getDetails","types","status","PlacesServiceStatus","OK","mutations","lodash_default","a","cloneDeep","config","productionTip","render","$mount"],"mappings":"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","file":"js/app.1112c15c.js","sourcesContent":["<template>\n<div class=\"header flex-row\" style=\"padding:0.25rem; justify-content: left; background:none\">\n  <h5 style=\"flex:2; text-align:left\"> Trip Flow <span style=\"font-size: 50%\">{{user.name}}</span></h5>\n  <div class=\"flex-row\" style=\"flex:1\">\n     <!--\n     <a target=\"_blank\" href=\"http://github.com/mwdchang/trip-flow\"><i class=\"fa fa-github\"></i>&nbsp;Fork me on GitHub</a>\n     &nbsp;\n     -->\n     <button class=\"btn btn-sm btn-info\" v-on:click=\"setShowDestDialog(true)\">New Destination</button>\n     <button class=\"btn btn-sm btn-info\" v-on:click=\"setShowPlanDialog(true)\">New Plan</button>\n     <button class=\"btn btn-sm btn-info\" v-on:click=\"setShowNewTripDialog(true)\">New Trip</button>\n     <button class=\"btn btn-sm btn-info\" v-on:click=\"setShowLoadTripDialog(true)\">Load Trip</button>\n     <button v-if=\"user.loggedIn === false\" class=\"btn btn-sm btn-primary\" v-on:click=\"signin()\">Sign in </button>\n     <button v-if=\"user.loggedIn === true\" class=\"btn btn-sm btn-primary\" v-on:click=\"signout()\">Sign out </button>\n  </div>\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n  name: 'TripHeader',\n  created: function() {\n  },\n  computed: {\n    ...mapGetters(['user'])\n  },\n  methods: {\n    ...mapActions([\n      'setShowNewTripDialog',\n      'setShowLoadTripDialog',\n      'setShowPlanDialog',\n      'setShowDestDialog',\n    ]),\n    signin: function() {\n      this.googleSignin();\n    },\n    signout: function() {\n      this.googleSignout();\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.header {\n  .btn {\n    margin-right: 5px;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/header.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header flex-row\",staticStyle:{\"padding\":\"0.25rem\",\"justify-content\":\"left\",\"background\":\"none\"}},[_c('h5',{staticStyle:{\"flex\":\"2\",\"text-align\":\"left\"}},[_vm._v(\" Trip Flow \"),_c('span',{staticStyle:{\"font-size\":\"50%\"}},[_vm._v(_vm._s(_vm.user.name))])]),_c('div',{staticClass:\"flex-row\",staticStyle:{\"flex\":\"1\"}},[_c('button',{staticClass:\"btn btn-sm btn-info\",on:{\"click\":function($event){_vm.setShowDestDialog(true)}}},[_vm._v(\"New Destination\")]),_c('button',{staticClass:\"btn btn-sm btn-info\",on:{\"click\":function($event){_vm.setShowPlanDialog(true)}}},[_vm._v(\"New Plan\")]),_c('button',{staticClass:\"btn btn-sm btn-info\",on:{\"click\":function($event){_vm.setShowNewTripDialog(true)}}},[_vm._v(\"New Trip\")]),_c('button',{staticClass:\"btn btn-sm btn-info\",on:{\"click\":function($event){_vm.setShowLoadTripDialog(true)}}},[_vm._v(\"Load Trip\")]),(_vm.user.loggedIn === false)?_c('button',{staticClass:\"btn btn-sm btn-primary\",on:{\"click\":function($event){_vm.signin()}}},[_vm._v(\"Sign in \")]):_vm._e(),(_vm.user.loggedIn === true)?_c('button',{staticClass:\"btn btn-sm btn-primary\",on:{\"click\":function($event){_vm.signout()}}},[_vm._v(\"Sign out \")]):_vm._e()])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1e2a3804\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/header.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!sass-loader?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./header.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./header.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./header.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1e2a3804\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./header.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/header.vue\n// module id = null\n// module chunks = ","const FIREBASE_CONFIG = {\n  apiKey: 'AIzaSyDFqeomnCXYFfuIj3iSf5NpHBgRDUXGB4k',\n  authDomain: \"tripflow-1509338122882.firebaseapp.com\",\n  databaseURL: 'https://tripflow-1509338122882.firebaseio.com/',\n}\nfirebase.initializeApp(FIREBASE_CONFIG);\n\n\nconst database = firebase.database();\nconst provider = new firebase.auth.GoogleAuthProvider();\n\nexport default class {\n  static readDB(path) {\n    return database.ref(path).once('value')\n  }\n\n  static writeDB(path, value) {\n    return database.ref(path).set(value)\n  }\n}\n\n\n\nfunction googleSignin() {\n   firebase.auth()\n   .signInWithPopup(provider).then(function(result) {\n      var token = result.credential.accessToken;\n      var user = result.user;\n      console.log(token)\n      console.log(user)\n   }).catch(function(error) {\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      console.log(error.code)\n      console.log(error.message)\n   });\n}\n\nfunction googleSignout() {\n   firebase.auth().signOut()\n   .then(function() {\n      console.log('Signout Succesfull')\n   }, function(error) {\n      console.log('Signout Failed')  \n   });\n}\n\n\n/*\nexport {readDB}\nexport {writeDB}\nexport {googleSignin}\nexport {googleSignout}\n*/\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/db.js","<template>\n  <div class=\"modal\" style=\"opacity:0.9\" :class=\"{'show': showNewTripDialog}\">\n  <div class=\"modal-dialog modal-lg\"> \n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <strong>Add Trip</strong>\n      </div>\n      <div class=\"modal-body\">\n        <input type=\"text\" v-model=\"name\" placeholder=\"Trip name\">\n      </div>\n      <div class=\"modal-footer\">\n        <button class=\"btn btn-primary btn-sm\" v-on:click=\"save()\">Save</button>\n        <button class=\"btn btn-primary btn-sm\" v-on:click=\"cancel()\">Cancel</button>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\nimport DB from '../util/db';\n\nexport default {\n  name: 'TripNew',\n  data: () => {\n    return {name: ''};\n  },\n  computed: {\n    ...mapGetters(['showNewTripDialog', 'trip'])\n  },\n  methods: {\n    ...mapActions(['setShowNewTripDialog']),\n    save: function() {\n      this.trip.name = this.name;\n      DB.writeDB('/Trip/'+this.name, this.trip.toObj());\n      this.setShowNewTripDialog(false);\n    },\n    cancel: function() {\n      this.setShowNewTripDialog(false);\n    }\n  }\n\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/trip-new.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal\",class:{'show': _vm.showNewTripDialog},staticStyle:{\"opacity\":\"0.9\"}},[_c('div',{staticClass:\"modal-dialog modal-lg\"},[_c('div',{staticClass:\"modal-content\"},[_vm._m(0),_c('div',{staticClass:\"modal-body\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Trip name\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}})]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-primary btn-sm\",on:{\"click\":function($event){_vm.save()}}},[_vm._v(\"Save\")]),_c('button',{staticClass:\"btn btn-primary btn-sm\",on:{\"click\":function($event){_vm.cancel()}}},[_vm._v(\"Cancel\")])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header\"},[_c('strong',[_vm._v(\"Add Trip\")])])}]\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a5c2f67e\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/trip-new.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./trip-new.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./trip-new.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a5c2f67e\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./trip-new.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/trip-new.vue\n// module id = null\n// module chunks = ","/********************************************************************************\n*\n* Basic building blocks\n* \n* Trip\n* - id: string\n* - name:  string\n* - plans: Plan[]\n*\n* Plan:\n* - id: string\n* - name: string\n* - start: number\n* - end:   number \n* - items: Item[]\n*\n*\n********************************************************************************/\nexport default class Trip {\n  constructor() {\n    this.name = '';\n    this.plans = [];\n    this.places = [];\n    this.updated = 0;\n\n    this.view = 'summary';\n  }\n\n  addPlan(plan) {\n    this.plans.push(plan);\n  }\n\n  addPlace(place) {\n    this.places.push(place);\n  }\n\n  findPlace(placeId) {\n    let r = _.find(this.places, d => d.placeId === placeId);\n    return r || {};\n  }\n\n  maxLength() {\n    return _.max(\n      this.plans.map(plan => {\n        let list = this.listPlan(plan);\n        return _.sum(list.map(item => item.data.duration));\n      })\n    );\n  }\n\n  dateFormat(t) {\n    if (_.isNumber(t) === false) return '';\n    return d3.timeFormat('%Y-%m-%d %I:%M:%S %p')(+t);\n  }\n\n  listPlan(plan) {\n    let r = [];\n    for (let i=0; i < plan.itineraries.length; i++) {\n      r.push({\n        type: 'itineraries',\n        data: plan.itineraries[i]\n      })\n      if (i < plan.travels.length) {\n        r.push({\n          type: 'travels',\n          data: plan.travels[i]\n        })\n      }\n    }\n    return r;\n  }\n\n  load(text) {\n    let data = JSON.parse(text)\n    this.loadJSON(data)\n  }\n\n  loadJSON(data) {\n    this.name = data.name || '';\n    this.places = data.places || [];\n    this.plans = data.plans || [];\n    this.updated = data.updated || '';\n\n    this.sanitize();\n  }\n\n  sanitize() {\n    if (this.plans.length === 0) return;\n\n    this.plans.forEach( plan => {\n      plan.itineraries.forEach( d => {\n        d.duration = +d.duration;\n      })\n      plan.travels.forEach( d => {\n        d.duration = +d.duration;\n      })\n    });\n  }\n\n  toObj() {\n    this.sanitize();\n    return {\n      name: this.name,\n      places: this.places.map(d => d.placeId),\n      plans: this.plans,\n      updated: (new Date()).getTime()\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/trip.js","<template>\n<div class=\"modal\" style=\"opacity:0.9\" :class=\"{'show': showLoadTripDialog}\">\n  <div class=\"modal-dialog modal-lg\"> \n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <strong>Load Trip </strong>\n      </div>\n      <div class=\"modal-body\">\n        <table class=\"table table-hover\">\n          <tbody>\n            <tr v-for=\"(trip, idx) of trips\" :key=\"idx\" style=\"cursor:pointer\" v-on:click=\"load(trip)\">\n              <td>{{trip}}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class=\"modal-footer\">\n        <button class=\"btn btn-primary btn-sm\" v-on:click=\"cancel()\">Cancel</button>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\nimport DB from '../util/db';\nimport Trip from '../model/trip';\n\nexport default {\n  name: 'TripLoad',\n  data: () => ({\n    trips: []\n  }),\n  created: function() {\n    DB.readDB('/Trip').then(values => {\n      let trips = Object.keys(values.val());\n      trips.forEach( t => {\n        this.trips.push(t);\n      });\n    });\n  },\n  computed: {\n    ...mapGetters([\n      'showLoadTripDialog'\n    ])\n  },\n  methods: {\n    ...mapActions(['setShowLoadTripDialog', 'getPlaceDetail', 'setTrip']),\n    load: function(name) {\n      const path = '/Trip/' + name;\n      DB.readDB(path).then( d => {\n        if (d.val() === null) return;\n        const trip = new Trip();\n        trip.loadJSON(d.val());\n\n        let promises = [];\n        trip.places.forEach(p => {\n          promises.push(this.getPlaceDetail(p));\n        });\n        Promise.all(promises).then(values => {\n          trip.places = values;\n          this.setTrip(trip);\n          this.setShowLoadTripDialog(false);\n        });\n        \n      });\n    },\n    cancel: function() {\n      this.setShowLoadTripDialog(false);\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/trip-load.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal\",class:{'show': _vm.showLoadTripDialog},staticStyle:{\"opacity\":\"0.9\"}},[_c('div',{staticClass:\"modal-dialog modal-lg\"},[_c('div',{staticClass:\"modal-content\"},[_vm._m(0),_c('div',{staticClass:\"modal-body\"},[_c('table',{staticClass:\"table table-hover\"},[_c('tbody',_vm._l((_vm.trips),function(trip,idx){return _c('tr',{key:idx,staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.load(trip)}}},[_c('td',[_vm._v(_vm._s(trip))])])}))])]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-primary btn-sm\",on:{\"click\":function($event){_vm.cancel()}}},[_vm._v(\"Cancel\")])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header\"},[_c('strong',[_vm._v(\"Load Trip \")])])}]\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-55192655\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/trip-load.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./trip-load.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./trip-load.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-55192655\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./trip-load.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/trip-load.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"modal\" style=\"opacity:0.9\" :class=\"{'show': showDestDialog}\">\n  <div class=\"modal-dialog modal-lg\"> \n    <div class=\"modal-content\">\n      <div class=\"modal-header\"><strong>Add/Edit Destination</strong></div>\n      <div class=\"modal-body\">\n        <div class=\"flex-col\">\n          <div> \n            <input type=\"text\" placeholder=\"Search\" v-model=\"searchStrModel\"> \n            <br>\n          </div>\n          <div> \n            <div v-for=\"(c, idx) in searchCandidates\" :key=\"idx\" class=\"destination-card\" v-on:click=\"select(c)\" style=\"display:inline-block\">\n              {{c.formatted_address}}<br>\n              <div v-if=\"c.photos\">\n                <img v-bind:src=\"c.photos[0].getUrl({maxHeight:65})\" v-if=\"c.photos[0]\">\n                <img v-bind:src=\"c.photos[1].getUrl({maxHeight:65})\" v-if=\"c.photos[1]\">\n                <img v-bind:src=\"c.photos[2].getUrl({maxHeight:65})\" v-if=\"c.photos[2]\">\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button class=\"btn btn-primary btn-sm\" v-on:click=\"cancel()\">Cancel</button>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n\n<script>\nfunction debounce(func, wait, immediate) {\n  var timeout;\n  return function() {\n    var context = this, args = arguments;\n    var later = function() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n  name: 'TripDest',\n  data: () => ({\n    searchStrModel: '',\n    searchCandidates: []\n  }),\n  computed: {\n    ...mapGetters(['trip', 'searchStr', 'showDestDialog', 'autocompleteService'])\n  },\n  methods: {\n    ...mapActions([\n      'setSearchStr', \n      'setShowDestDialog', \n      'getPlaceDetail'\n    ]),\n    cancel: function() {\n      this.setShowDestDialog(false);\n    },\n    select: function(place) {\n      this.trip.addPlace(place);\n      this.searchStrModel = '';\n    },\n    predict: debounce(function() {\n      this.autocompleteService.getPlacePredictions({ input: this.searchStr, types:['(cities)']}, predictions => {\n        if (!predictions || predictions === null) return;\n\n        let promises = [];\n        predictions.forEach( p => {\n          if (!p.place_id) return;\n          promises.push(this.getPlaceDetail(p.place_id));\n        });\n\n        if (promises.length === 0) return;\n\n        Promise.all(promises).then( values => {\n          this.searchCandidates = [];\n          values.forEach( v => {\n            if (v === null) return;\n            this.searchCandidates.push(v);\n          });\n        })\n      })\n    }, 800)\n  },\n  watch: {\n    searchStr: function() {\n      if (this.searchStr.length < 3) {\n        this.searchCandidates = [];\n        return;\n      }\n      this.predict();\n    },\n    searchStrModel: function changed() {\n      this.setSearchStr(this.searchStrModel);\n    }\n  }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/trip-dest.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal\",class:{'show': _vm.showDestDialog},staticStyle:{\"opacity\":\"0.9\"}},[_c('div',{staticClass:\"modal-dialog modal-lg\"},[_c('div',{staticClass:\"modal-content\"},[_vm._m(0),_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"flex-col\"},[_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchStrModel),expression:\"searchStrModel\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Search\"},domProps:{\"value\":(_vm.searchStrModel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.searchStrModel=$event.target.value}}}),_c('br')]),_c('div',_vm._l((_vm.searchCandidates),function(c,idx){return _c('div',{key:idx,staticClass:\"destination-card\",staticStyle:{\"display\":\"inline-block\"},on:{\"click\":function($event){_vm.select(c)}}},[_vm._v(\"\\n              \"+_vm._s(c.formatted_address)),_c('br'),(c.photos)?_c('div',[(c.photos[0])?_c('img',{attrs:{\"src\":c.photos[0].getUrl({maxHeight:65})}}):_vm._e(),(c.photos[1])?_c('img',{attrs:{\"src\":c.photos[1].getUrl({maxHeight:65})}}):_vm._e(),(c.photos[2])?_c('img',{attrs:{\"src\":c.photos[2].getUrl({maxHeight:65})}}):_vm._e()]):_vm._e()])}))])]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-primary btn-sm\",on:{\"click\":function($event){_vm.cancel()}}},[_vm._v(\"Cancel\")])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header\"},[_c('strong',[_vm._v(\"Add/Edit Destination\")])])}]\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2743964e\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/trip-dest.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./trip-dest.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./trip-dest.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2743964e\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./trip-dest.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/trip-dest.vue\n// module id = null\n// module chunks = ","<template>\n  <div style=\"width:50%; height:99%\" id=\"summary\">\n    <ul class=\"nav nav-tabs\" >\n      <li class=\"nav-item\" @click=\"switchTo('summary')\">\n        <a v-bind:class=\"{active: trip.view ==='summary'}\" class=\"nav-link\" href=\"#\">Summary</a>\n      </li>\n      <li class=\"nav-item\" @click=\"switchTo('plans')\">\n        <a v-bind:class=\"{active: trip.view ==='plans'}\" class=\"nav-link\" href=\"#\">Plans </a>\n      </li>\n      <li class=\"nav-item\" @click=\"switchTo('destinations')\">\n        <a v-bind:class=\"{active: trip.view==='destinations'}\" class=\"nav-link\" href=\"#\">Destinations</a>\n      </li>\n    </ul>\n  \n    <div v-if=\"trip.view==='summary'\" style=\"padding:0.5rem\">\n      <table class=\"table\">\n        <tbody>\n          <tr><td colspan=\"2\"><strong>{{trip.name}}</strong></td></tr>\n          <tr><td>Total destinations</td><td>{{trip.places.length}}</td></tr>\n          <tr><td>Destinations used</td><td></td></tr>\n          <tr><td>Number of plans</td><td>{{trip.plans.length}}</td></tr>\n          <tr><td>Last updated</td><td>{{ trip.updated | formatDate }}</td></tr>\n          <tr><td>Last updater</td><td></td></tr>\n        </tbody>\n      </table>\n    </div>\n\n    <div v-if=\"trip.view==='plans'\" style=\"padding:0.5rem\">\n      <div v-if=\"trip.plans.length === 0\">\n        Click on <strong><em>New Plan</em></strong> to add a new trip plan.\n      </div>\n\n      <div class=\"flex-row\">\n        <div style=\"max-height: 25rem; overflow-y: scroll\">\n          <div v-for=\"(plan, idx) of trip.plans\" @click=\"show(plan, idx)\" class=\"plan-card\" :key=\"idx\" :class=\"{'active': currentPlan && currentPlan.name === plan.name}\">\n            {{plan.name}} <br>\n            <em>{{plan.itineraries.length}} destinations</em>\n            <br>\n          </div>\n        </div> \n\n        <div style=\"margin-left: 0.5rem; padding-left: 1.0rem;  border-left: 1px solid #ddd; flex:1\" v-if=\"currentPlan\">\n          <div class=\"flex-row\">\n            <button class=\"btn btn-sm btn-primary\" @click=\"editPlan()\">Edit</button>\n            &nbsp;\n            <button class=\"btn btn-sm btn-danger\" @click=\"deletePlan()\">Delete</button>\n          </div>\n          <table class=\"table\" style=\"margin-top: 0.5rem\">\n            <tbody>\n              <tr v-for=\"(item, idx) of listPlan(currentPlan)\" :key=\"idx\">\n                <td style=\"padding:0; position:relative; border: 0; width:25px\">\n                  <div style=\"position:absolute; top:0; left:9px; width:2px; height:100%; background: #AAA\"></div>\n                  <div v-if=\"item.type === 'itineraries'\" style=\"position:absolute; left:0px; width:20px; height:20px; background: #EEE; border:2px solid #AAA; border-radius:50%\"></div>\n                </td>\n                <td v-if=\"item.type==='itineraries'\">{{findPlace(item.data.placeId).name}}</td>\n                <td v-if=\"item.type==='travels'\" style=\"text-align:center\"><em>...Travel...</em></td>\n                <td>{{item.data.duration}}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n\n\n    <div v-if=\"trip.view==='destinations'\" style=\"padding:0.5rem; max-height:25rem; overflow-y: scroll\">\n      <div v-if=\"trip.places.length === 0\">\n        Click on <strong><em>New Destination</em></strong> to add destinations to your trip.\n      </div>\n      <table class=\"table\" v-if=\"trip.view==='destinations'\">\n        <tbody>\n          <tr v-for=\"(place, idx) in trip.places\" :key=\"idx\">\n            <td>\n              {{place.name}}\n            </td>\n            <td>\n              <div v-if=\"place.photos\">\n                <img v-bind:src=\"place.photos[0].getUrl({maxHeight:50})\" v-if=\"place.photos[0]\">\n                <img v-bind:src=\"place.photos[1].getUrl({maxHeight:50})\" v-if=\"place.photos[1]\">\n                <img v-bind:src=\"place.photos[2].getUrl({maxHeight:50})\" v-if=\"place.photos[2]\">\n              </div>\n            </td>\n            <td>\n              <span v-if=\"isPlaceUsed(place.placeId) === true\" style=\"color:#CCC\">Used</span>\n              <button v-if=\"isPlaceUsed(place.placeId) === false\" class=\"btn btn-sm btn-danger\" @click=\"deletePlace(place.placeId)\">Delete</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n\n</template>\n\n<script>\n\nimport { mapGetters, mapActions } from 'vuex';\nimport * as d3 from 'd3';\nimport _ from 'lodash';\n\nimport DB from '../util/db';\n\nexport default {\n  name: 'trip-summary',\n  filters: {\n    formatDate: function(t) {\n      if (_.isNumber(t) === false) return '';\n      return d3.timeFormat('%Y-%m-%d %I:%M:%S %p')(+t);\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'trip',\n      'currentPlan',\n      'currentPlanIdx'\n    ])\n  },\n  methods: {\n    ...mapActions([\n      'setShowPlanDialog',\n      'setCurrentPlan',\n      'setCurrentPlanIdx',\n    ]),\n    listPlan: function(p) { return this.trip.listPlan(p); },\n    findPlace: function(id) { return this.trip.findPlace(id); },\n    switchTo: function(view) {\n      this.trip.view = view;\n    },\n    show: function(plan, idx) {\n      this.setCurrentPlan(plan);\n      this.setCurrentPlanIdx(idx);\n    },\n    isPlaceUsed: function(placeId) {\n      let all = _.flatten(this.trip.plans.map(p => {\n        return p.itineraries.map(dest => dest.placeId);\n      }));\n      return all.indexOf(placeId) >= 0;\n    },\n    deletePlace: function(placeId) {\n      if (placeId !== null) {\n        let idx = _.findIndex(this.trip.places, p => {\n          return p.placeId === placeId;\n        })\n        if (idx !== -1) {\n          this.trip.places.splice(idx, 1);\n        }\n        DB.writeDB('/Trip/' + this.trip.name, this.trip.toObj());\n      }\n    },\n    editPlan: function() {\n      this.setShowPlanDialog(true);\n    },\n    deletePlan: function() {\n      \n      if (this.currentPlanIdx > -1) {\n        this.trip.plans.splice(this.currentPlanIdx, 1);\n        this.setCurrentPlan(null);\n        this.setCurrentPlanIdx(-1);\n        DB.writeDB('/Trip/' + this.trip.name, this.trip.toObj());\n      }\n      \n    }\n  }\n\n}\n</script>\n\n\n<style lang=\"scss\">\n.plan-card  {\n  padding: 0.25rem 0.5rem; \n  border: 1px solid #ddd; \n  border-radius: 4px;\n  margin: 0.25rem;\n\n  &.active {\n    background: #DDD;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/trip-summary.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"50%\",\"height\":\"99%\"},attrs:{\"id\":\"summary\"}},[_c('ul',{staticClass:\"nav nav-tabs\"},[_c('li',{staticClass:\"nav-item\",on:{\"click\":function($event){_vm.switchTo('summary')}}},[_c('a',{staticClass:\"nav-link\",class:{active: _vm.trip.view ==='summary'},attrs:{\"href\":\"#\"}},[_vm._v(\"Summary\")])]),_c('li',{staticClass:\"nav-item\",on:{\"click\":function($event){_vm.switchTo('plans')}}},[_c('a',{staticClass:\"nav-link\",class:{active: _vm.trip.view ==='plans'},attrs:{\"href\":\"#\"}},[_vm._v(\"Plans \")])]),_c('li',{staticClass:\"nav-item\",on:{\"click\":function($event){_vm.switchTo('destinations')}}},[_c('a',{staticClass:\"nav-link\",class:{active: _vm.trip.view==='destinations'},attrs:{\"href\":\"#\"}},[_vm._v(\"Destinations\")])])]),(_vm.trip.view==='summary')?_c('div',{staticStyle:{\"padding\":\"0.5rem\"}},[_c('table',{staticClass:\"table\"},[_c('tbody',[_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('strong',[_vm._v(_vm._s(_vm.trip.name))])])]),_c('tr',[_c('td',[_vm._v(\"Total destinations\")]),_c('td',[_vm._v(_vm._s(_vm.trip.places.length))])]),_vm._m(0),_c('tr',[_c('td',[_vm._v(\"Number of plans\")]),_c('td',[_vm._v(_vm._s(_vm.trip.plans.length))])]),_c('tr',[_c('td',[_vm._v(\"Last updated\")]),_c('td',[_vm._v(_vm._s(_vm._f(\"formatDate\")(_vm.trip.updated)))])]),_vm._m(1)])])]):_vm._e(),(_vm.trip.view==='plans')?_c('div',{staticStyle:{\"padding\":\"0.5rem\"}},[(_vm.trip.plans.length === 0)?_c('div',[_vm._v(\"\\n      Click on \"),_vm._m(2),_vm._v(\" to add a new trip plan.\\n    \")]):_vm._e(),_c('div',{staticClass:\"flex-row\"},[_c('div',{staticStyle:{\"max-height\":\"25rem\",\"overflow-y\":\"scroll\"}},_vm._l((_vm.trip.plans),function(plan,idx){return _c('div',{key:idx,staticClass:\"plan-card\",class:{'active': _vm.currentPlan && _vm.currentPlan.name === plan.name},on:{\"click\":function($event){_vm.show(plan, idx)}}},[_vm._v(\"\\n          \"+_vm._s(plan.name)+\" \"),_c('br'),_c('em',[_vm._v(_vm._s(plan.itineraries.length)+\" destinations\")]),_c('br')])})),(_vm.currentPlan)?_c('div',{staticStyle:{\"margin-left\":\"0.5rem\",\"padding-left\":\"1.0rem\",\"border-left\":\"1px solid #ddd\",\"flex\":\"1\"}},[_c('div',{staticClass:\"flex-row\"},[_c('button',{staticClass:\"btn btn-sm btn-primary\",on:{\"click\":function($event){_vm.editPlan()}}},[_vm._v(\"Edit\")]),_vm._v(\"\\n          \\n          \"),_c('button',{staticClass:\"btn btn-sm btn-danger\",on:{\"click\":function($event){_vm.deletePlan()}}},[_vm._v(\"Delete\")])]),_c('table',{staticClass:\"table\",staticStyle:{\"margin-top\":\"0.5rem\"}},[_c('tbody',_vm._l((_vm.listPlan(_vm.currentPlan)),function(item,idx){return _c('tr',{key:idx},[_c('td',{staticStyle:{\"padding\":\"0\",\"position\":\"relative\",\"border\":\"0\",\"width\":\"25px\"}},[_c('div',{staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"left\":\"9px\",\"width\":\"2px\",\"height\":\"100%\",\"background\":\"#AAA\"}}),(item.type === 'itineraries')?_c('div',{staticStyle:{\"position\":\"absolute\",\"left\":\"0px\",\"width\":\"20px\",\"height\":\"20px\",\"background\":\"#EEE\",\"border\":\"2px solid #AAA\",\"border-radius\":\"50%\"}}):_vm._e()]),(item.type==='itineraries')?_c('td',[_vm._v(_vm._s(_vm.findPlace(item.data.placeId).name))]):_vm._e(),(item.type==='travels')?_c('td',{staticStyle:{\"text-align\":\"center\"}},[_c('em',[_vm._v(\"...Travel...\")])]):_vm._e(),_c('td',[_vm._v(_vm._s(item.data.duration))])])}))])]):_vm._e()])]):_vm._e(),(_vm.trip.view==='destinations')?_c('div',{staticStyle:{\"padding\":\"0.5rem\",\"max-height\":\"25rem\",\"overflow-y\":\"scroll\"}},[(_vm.trip.places.length === 0)?_c('div',[_vm._v(\"\\n      Click on \"),_vm._m(3),_vm._v(\" to add destinations to your trip.\\n    \")]):_vm._e(),(_vm.trip.view==='destinations')?_c('table',{staticClass:\"table\"},[_c('tbody',_vm._l((_vm.trip.places),function(place,idx){return _c('tr',{key:idx},[_c('td',[_vm._v(\"\\n            \"+_vm._s(place.name)+\"\\n          \")]),_c('td',[(place.photos)?_c('div',[(place.photos[0])?_c('img',{attrs:{\"src\":place.photos[0].getUrl({maxHeight:50})}}):_vm._e(),(place.photos[1])?_c('img',{attrs:{\"src\":place.photos[1].getUrl({maxHeight:50})}}):_vm._e(),(place.photos[2])?_c('img',{attrs:{\"src\":place.photos[2].getUrl({maxHeight:50})}}):_vm._e()]):_vm._e()]),_c('td',[(_vm.isPlaceUsed(place.placeId) === true)?_c('span',{staticStyle:{\"color\":\"#CCC\"}},[_vm._v(\"Used\")]):_vm._e(),(_vm.isPlaceUsed(place.placeId) === false)?_c('button',{staticClass:\"btn btn-sm btn-danger\",on:{\"click\":function($event){_vm.deletePlace(place.placeId)}}},[_vm._v(\"Delete\")]):_vm._e()])])}))]):_vm._e()]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('td',[_vm._v(\"Destinations used\")]),_c('td')])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('td',[_vm._v(\"Last updater\")]),_c('td')])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('strong',[_c('em',[_vm._v(\"New Plan\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('strong',[_c('em',[_vm._v(\"New Destination\")])])}]\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1926ec45\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/trip-summary.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!sass-loader?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./trip-summary.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./trip-summary.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./trip-summary.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1926ec45\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./trip-summary.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/trip-summary.vue\n// module id = null\n// module chunks = ","<template>\n<div class=\"modal\" style=\"opacity:0.9\" :class=\"{'show': showPlanDialog}\">\n  <div class=\"modal-dialog modal-lg\">\n    <div class=\"modal-content\" v-if=\"currentPlan\">\n      <div class=\"modal-header\"><strong>Add/Edit Plan</strong></div>\n      <div class=\"modal-body\">\n        <div> \n          <input type=\"text\" placeholder=\"Plan name\" v-model=\"currentPlan.name\">\n        </div>\n        <br>\n        <div style=\"display:flex; flex-direction: row\">\n          <div style=\"padding-left:0rem; max-height:15rem; overflow-y:scroll; flex: 1; display:flex; flex-direction:row\"> \n            <div> \n              Destinations\n              <table class=\"table\">\n                <thead>\n                  <th></th>\n                  <th>Destination</th>\n                  <th>Duration</th>\n                  <th>Notes</th>\n                </thead>\n                <tbody>\n                  <tr v-for=\"(item, idx) in currentPlan.itineraries\" :key=\"idx\" v-if=\"currentPlan.itineraries.length > 0\">\n                    <td>\n                      <button>-</button>\n                      <button v-on:click=\"addRow()\">+</button>\n                    </td>\n                    <td>\n                      <select v-model=\"item.placeId\">\n                        <option disabled value=\"\">Destinations</option>\n                        <!--<option v-for=\"d in getTripPlaces()\" v-bind:value=\"d.placeId\">{{d.formatted_address}}</option>-->\n                        <option v-for=\"d in getTripPlaces()\" :key=\"d.placeId\" v-bind:value=\"d.placeId\">{{d.name}}</option>\n                      </select>\n                    </td>\n                    <td>\n                      <input type=\"text\" v-model=\"item.duration\" size=\"4\"/>\n                    </td>\n                    <td>\n                      <textarea rows=\"1\"></textarea>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n\n            </div>\n            <div style=\"margin-left:1rem\">\n              On Route \n              <table class=\"table\">\n                <thead>\n                  <th>Route</th>\n                  <th>Duration</th>\n                </thead>\n                <tbody>\n                  <tr v-for=\"(travel, idx) in currentPlan.travels\" :key=\"idx\">\n                    <td>\n                      <span>{{findPlace(travel.from).name}} &gt; {{findPlace(travel.to).name}}</span>\n                    </td>\n                    <td>\n                      <input type=\"text\" v-model=\"travel.duration\" size=\"4\"/>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n          </div>\n        </div>\n      </div>\n      <div class=\"modal-footer\">\n        <button class=\"btn btn-primary btn-sm\" v-on:click=\"save()\">Save</button>\n        <button class=\"btn btn-primary btn-sm\" v-on:click=\"cancel()\">Cancel</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n</template>\n\n<script>\n\nimport { mapGetters, mapActions } from 'vuex';\nimport DB from '../util/db';\n\nexport default {\n  name: 'trip-plan',\n  computed: {\n    ...mapGetters([\n      'showPlanDialog', \n      'currentPlan',\n      'trip'\n    ])\n  },\n  methods: {\n    ...mapActions(['setShowPlanDialog', 'setCurrentPlan']),\n    save: function() {\n      let itineraries = this.currentPlan.itineraries.map( d => {\n        return {\n          placeId: d.placeId,\n          duration: d.duration\n        };\n      });\n\n      let travels = this.currentPlan.travels.map( d => {\n        return {\n          from: d.from,\n          to: d.to,\n          duration: d.duration\n        };\n      });\n\n      if (this.currentPlan.mode === null) { \n        let plan = {\n          name: this.currentPlan.name,\n          start: 0,\n          end: 0,\n          itineraries: itineraries,\n          travels: travels\n        };\n        this.trip.addPlan(plan);\n        this.currentPlan.mode = null;\n      }\n      this.trip.sanitize();\n      DB.writeDB('/Trip/' + this.trip.name, this.trip.toObj());\n      this.setShowPlanDialog(false);\n    },\n    cancel: function() {\n      this.setShowPlanDialog(false);\n    },\n    getTripPlaces: function() {\n      return this.trip.places;\n    },\n    findPlace: function(placeId) {\n      return this.trip.findPlace(placeId);\n    },\n    addRow() {\n      this.currentPlan.itineraries.push({\n        placeId: '',\n        duration: 0\n      });\n\n      let num = this.currentPlan.itineraries.length;\n      if (num > 1) {\n        this.currentPlan.travels.push({\n          from: '', \n          to: '',\n          duration: 0\n        });\n      }\n    }\n  },\n  watch: {\n    'currentPlan.itineraries': function() {\n      if (_.isNil(this.currentPlan)) return;\n\n      let currentPlan = this.currentPlan;\n      let it = currentPlan.itineraries;\n      for (let i=0; i < currentPlan.travels.length; i++) {\n        let t = currentPlan.travels[i];\n        t.from = it[i].placeId;\n        t.to = it[i+1].placeId;\n      }\n    }\n  }\n\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/trip-plan.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal\",class:{'show': _vm.showPlanDialog},staticStyle:{\"opacity\":\"0.9\"}},[_c('div',{staticClass:\"modal-dialog modal-lg\"},[(_vm.currentPlan)?_c('div',{staticClass:\"modal-content\"},[_vm._m(0),_c('div',{staticClass:\"modal-body\"},[_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentPlan.name),expression:\"currentPlan.name\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Plan name\"},domProps:{\"value\":(_vm.currentPlan.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.currentPlan, \"name\", $event.target.value)}}})]),_c('br'),_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"row\"}},[_c('div',{staticStyle:{\"padding-left\":\"0rem\",\"max-height\":\"15rem\",\"overflow-y\":\"scroll\",\"flex\":\"1\",\"display\":\"flex\",\"flex-direction\":\"row\"}},[_c('div',[_vm._v(\" \\n              Destinations\\n              \"),_c('table',{staticClass:\"table\"},[_vm._m(1),_c('tbody',_vm._l((_vm.currentPlan.itineraries),function(item,idx){return (_vm.currentPlan.itineraries.length > 0)?_c('tr',{key:idx},[_c('td',[_c('button',[_vm._v(\"-\")]),_c('button',{on:{\"click\":function($event){_vm.addRow()}}},[_vm._v(\"+\")])]),_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.placeId),expression:\"item.placeId\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(item, \"placeId\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"disabled\":\"\",\"value\":\"\"}},[_vm._v(\"Destinations\")]),_vm._l((_vm.getTripPlaces()),function(d){return _c('option',{key:d.placeId,domProps:{\"value\":d.placeId}},[_vm._v(_vm._s(d.name))])})],2)]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.duration),expression:\"item.duration\"}],attrs:{\"type\":\"text\",\"size\":\"4\"},domProps:{\"value\":(item.duration)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(item, \"duration\", $event.target.value)}}})]),_vm._m(2,true)]):_vm._e()}))])]),_c('div',{staticStyle:{\"margin-left\":\"1rem\"}},[_vm._v(\"\\n              On Route \\n              \"),_c('table',{staticClass:\"table\"},[_vm._m(3),_c('tbody',_vm._l((_vm.currentPlan.travels),function(travel,idx){return _c('tr',{key:idx},[_c('td',[_c('span',[_vm._v(_vm._s(_vm.findPlace(travel.from).name)+\" > \"+_vm._s(_vm.findPlace(travel.to).name))])]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(travel.duration),expression:\"travel.duration\"}],attrs:{\"type\":\"text\",\"size\":\"4\"},domProps:{\"value\":(travel.duration)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(travel, \"duration\", $event.target.value)}}})])])}))])])])])]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-primary btn-sm\",on:{\"click\":function($event){_vm.save()}}},[_vm._v(\"Save\")]),_c('button',{staticClass:\"btn btn-primary btn-sm\",on:{\"click\":function($event){_vm.cancel()}}},[_vm._v(\"Cancel\")])])]):_vm._e()])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header\"},[_c('strong',[_vm._v(\"Add/Edit Plan\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('th'),_c('th',[_vm._v(\"Destination\")]),_c('th',[_vm._v(\"Duration\")]),_c('th',[_vm._v(\"Notes\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('textarea',{attrs:{\"rows\":\"1\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('th',[_vm._v(\"Route\")]),_c('th',[_vm._v(\"Duration\")])])}]\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b7ca765e\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/trip-plan.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./trip-plan.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./trip-plan.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b7ca765e\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./trip-plan.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/trip-plan.vue\n// module id = null\n// module chunks = ","/** \n * Wraps a google map\n **/\nexport default class MapLayer {\n  constructor(map) {\n    this.map = map;\n    this.mapObjects = [];\n    this.usePathIcon = true;\n  }\n\n  refresh(trip) {\n    this.mapObjects.forEach(obj => {\n      obj.setMap(null)\n    });\n\n    if (trip.plans.length === 0) return;\n    this.renderPlans(trip);\n    this.renderPlaces(trip);\n  }\n\n  renderPlans(trip) {\n    let palette = ['#FF0000', '#CC0099', '#448822', '#884488', '#336699'];\n\n    // Define a symbol using SVG path notation, with an opacity of 1.\n    let lineSymbol = {\n      // path: 'M 0,-1 0,1',\n      path: 'M 0,-0.2 0,0.2',\n      strokeOpacity: 0.5,\n      scale: 4\n    };\n\n    trip.plans.forEach( (plan, pIdx) => {\n      let poly = []\n      plan.itineraries.forEach(it => {\n        let place = _.find(trip.places, p => p.placeId === it.placeId)\n        let lat = place.geometry.location.lat()\n        let lng = place.geometry.location.lng()\n        poly.push({lat: lat, lng: lng})\n      });\n      let ppath = null;\n\n      ppath = new google.maps.Polyline({\n        path: poly,\n        geodesic: true,\n        strokeColor: palette[pIdx],\n        strokeOpacity: 0.8,\n        strokeWeight: 0,\n        icons: [{\n          icon: lineSymbol,\n          offset: '0',\n          repeat: '10px'\n        }]\n      });\n      if (this.usePathIcon === false) {\n        ppath = new google.maps.Polyline({\n          path: poly,\n          geodesic: true,\n          strokeColor: palette[pIdx],\n          strokeOpacity: 0.8,\n          strokeWeight: 2,\n        });\n      }\n      ppath.setMap(this.map);\n      this.mapObjects.push(ppath);\n    });\n  }\n\n  renderPlaces(trip) {\n    let bounds = new google.maps.LatLngBounds();\n\n    trip.places.forEach(place => {\n      let lat = place.geometry.location.lat();\n      let lng = place.geometry.location.lng();\n      let c = new google.maps.Circle({\n        map: this.map,\n        center: { \n          lat: lat,\n          lng: lng\n        },\n        strokeColor: '#04f',\n        strokeWeight: 2,\n        fillColor: '#04f',\n        radius: 25000\n      });\n      this.mapObjects.push(c);\n      bounds.extend(place.geometry.location);\n    });\n    this.map.fitBounds(bounds);\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/map-layer.js","import * as d3 from 'd3';\n\nfunction translate(x, y) {\n  return 'translate(' + x + ',' + y + ')';\n}\n\n\nexport default class Graph {\n\n  constructor(target) {\n    let bbox = target.node().getBoundingClientRect()\n    this.svg = target.append('svg')\n      .attr('width', '100%')\n      .attr('height', '100%')\n      .attr('viewBox', '0 0 ' + bbox.width + ' ' + bbox.height);\n\n    this.margin = 5;\n    this.w = bbox.width - 2*this.margin;\n    this.h = bbox.height - 2*this.margin;\n    this.chart = this.svg.append('g').attr('transform', translate(this.margin, this.margin));\n  }\n\n  setClickFn(fn) {\n    this.clickFn = fn;\n  }\n\n\n  render(trip) {\n    let chart = this.chart;\n    chart.selectAll('*').remove();\n\n    if (trip.plans.length === 0) return;\n\n    let maxLength = trip.maxLength();\n    let bufferedMaxLength = maxLength + 5; // Just give it a little extra space\n    let unit = this.w / bufferedMaxLength;\n    let planH = 20;\n\n\n    let scale = d3.scaleOrdinal()\n      .range(d3.schemeCategory10)\n      .domain(trip.places.map( place => place.placeId));\n\n    // Draw guides\n    let start = 0;\n    while(true) {\n      if (start > maxLength) break;\n      chart.append('rect')\n        .attr('x', 70+start*unit)\n        .attr('y', 0)\n        .attr('width', 1)\n        .attr('height', 100)\n        .attr('stroke', 'none')\n        .attr('fill', '#BBB');\n\n      chart.append('text')\n        .attr('x', 70+start*unit)\n        .attr('y', 115)\n        .style('text-anchor', 'middle')\n        .text(start);\n      start += 1;\n    }\n\n    trip.plans.forEach( (plan, planIdx) => {\n      let list = trip.listPlan(plan);\n      let start = 70;\n      let group = chart.append('g').datum(plan);\n      let clickFn = this.clickFn;\n\n      group.on('click', function(d) {\n        if (clickFn) {\n          clickFn(d);\n        }\n      });\n\n      group.append('text')\n        .attr('x', start-10)\n        .attr('y', 25+planIdx*(planH+2))\n        .style('text-anchor', 'end')\n        .text(plan.name);\n\n      list.forEach( item => {\n        let duration = item.data.duration;\n        let type = item.type;\n\n        if (type === 'travels') {\n          group.append('rect')\n            .attr('x', start+1)\n            .attr('y', 17+planIdx*(planH+5))\n            .attr('width', duration*unit)\n            .attr('height', 6)\n            .style('fill', '#aaa');\n        } else {\n          let color = scale(item.data.placeId);\n          group.append('rect')\n            .attr('x', start)\n            .attr('y', 10+planIdx*(planH + 5))\n            .attr('rx', 5)\n            .attr('width', duration*unit)\n            .attr('height', planH)\n            .style('fill', color)\n            .style('stroke-width', 2)\n            .style('stroke', d3.color(color).darker());\n        }\n\n        start += duration*unit;\n      })\n\n    })\n\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/graph.js","<template>\n  <div id=\"app\">\n   <trip-header></trip-header>\n\n    <div class=\"flex-row\"> \n      <trip-summary></trip-summary>\n      <div style=\"width:50%\">\n        <div id=\"googleMap\" style=\"height:20rem; width:100%\" class=\"todo\"></div>\n        <div class=\"flex-column\">\n          <div>Plans Timeline</div>\n          <div style=\"width:100%; min-height:8rem\" id=\"graph\">\n          </div>\n        </div>\n      </div>\n    </div>\n\n   <trip-new></trip-new>\n   <trip-load></trip-load>\n   <trip-dest></trip-dest>\n   <trip-plan></trip-plan>\n\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3';\n\nimport { mapGetters, mapActions } from 'vuex';\nimport TripHeader from './components/header.vue';\nimport TripNew from './components/trip-new.vue';\nimport TripLoad from './components/trip-load.vue';\nimport TripDest from './components/trip-dest.vue';\nimport TripSummary from './components/trip-summary.vue';\nimport TripPlan from './components/trip-plan.vue';\n\nimport MapLayer from './util/map-layer';\nimport Graph from './util/graph';\n\nexport default {\n  name: 'app',\n  data: () => ({\n    mapLayer: null,\n    graph: null\n  }),\n  components: {\n    TripHeader,\n    TripNew,\n    TripLoad,\n    TripDest,\n    TripSummary,\n    TripPlan\n  },\n  mounted() {\n    const center = new google.maps.LatLng(51.0, 0.0);\n    const map = new google.maps.Map(document.getElementById('googleMap'), {\n      center: center,\n      zoom: 5,\n      mapTypeControlOptions: {\n        mapTypeIds: []\n      },\n      streetViewControl: false\n    });\n    const autocompleteService = new google.maps.places.AutocompleteService();\n    const placeService = new google.maps.places.PlacesService(map);\n\n    this.graph = new Graph(d3.select('#graph'));\n    this.mapLayer = new MapLayer(map);\n    this.setPlaceService(placeService);\n    this.setAutocompleteService(autocompleteService);\n  },\n  computed: {\n    ...mapGetters(['trip'])\n  },\n  watch: {\n    trip: function changed() {\n      this.mapLayer.refresh(this.trip);\n      this.graph.render(this.trip);\n    }\n  },\n  methods: {\n    ...mapActions([\n      'setPlaceService',\n      'setAutocompleteService'\n    ])\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 5px;\n}\n\nselect {\n  height: 1.5rem;\n  border-radius:0 !important;\n}\n\n.flex-row {\n  display: flex;\n  flex-direction: row;\n}\n\n.flex-col {\n  display: flex;\n  flex-direction: column;\n}\n\n.todo {\n  border: 1px solid #ccc;\n  background: #EEE;\n}\n\n.modal {\n  display: none;\n}\n\n.modal.show {\n  display: block; \n}\n\n\n.modal-header, .modal-footer {\n  padding-top: 10px;\n  padding-bottom: 10px;\n}\n\n.destination-card {\n  width: 48%;\n  margin: 2px;\n  padding: 4px 8px;\n  border: 1px solid #DDD;\n  border-radius: 2px;\n  cursor: pointer;\n}\n\n.destination-card:hover {\n  background: #69C;\n  color: #EEE;\n}\n\n\n.action-button {\n  font-size: 0.75rem;\n  cursor: pointer;\n  border-radius: 2px;\n  border-left: 1px solid #DDD;\n  box-sizing: border-box;\n}\n\n.btn {\n  cursor: pointer;\n}\n\n.btn-sm {\n  padding: 0.1rem 0.2rem;\n  font-size: 0.8rem;\n}\n\n.action-button:hover {\n  padding: 2px 5px;\n  background: #69C;\n  color: #EEE;\n}\n\n/* override bootstrap */\ntd {\n  padding: 0.25rem 0.5rem !important;\n  text-align: left;\n}\n\n\n\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('trip-header'),_c('div',{staticClass:\"flex-row\"},[_c('trip-summary'),_vm._m(0)],1),_c('trip-new'),_c('trip-load'),_c('trip-dest'),_c('trip-plan')],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"50%\"}},[_c('div',{staticClass:\"todo\",staticStyle:{\"height\":\"20rem\",\"width\":\"100%\"},attrs:{\"id\":\"googleMap\"}}),_c('div',{staticClass:\"flex-column\"},[_c('div',[_vm._v(\"Plans Timeline\")]),_c('div',{staticStyle:{\"width\":\"100%\",\"min-height\":\"8rem\"},attrs:{\"id\":\"graph\"}})])])}]\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-68dbdee5\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/daniel/workspace/trip-flow/node_modules/.cache/cache-loader\\\"}!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-68dbdee5\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","export default class Mock {\n\n  static mockTrip() {\n    return {\n      name: 'Test trip',\n      places: [],\n      plans: [],\n      updated: 0\n    }\n  }\n\n  static mockLoggedInUser() {\n    return {\n      name: 'User Alpha',\n      loggedIn: true\n    }\n  }\n\n  static mockLoggedOutUser() {\n    return {\n      name: '',\n      loggedIn: false\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/mock.js","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport _ from 'lodash';\n\nimport Mock from '../util/mock';\nimport Trip from '../model/trip';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {\n    /* Main data */\n    user: Mock.mockLoggedInUser(),\n    trip: new Trip(),\n\n    /* Cache some services */\n    placeService: null,\n    autocompleteService: null,\n\n    /* User input stuff */\n    searchStr:  '',\n    currentPlan: null,\n    currentPlanIdx: -1,\n\n    /* Dialog control */\n    showNewTripDialog: false,\n    showLoadTripDialog: false,\n    showPlanDialog: false,\n    showDestDialog: false,\n  },\n  getters: {\n    user: (state) => {\n      if (state.user === null) {\n        return {\n          name: null,\n          loggedIn: false\n        };\n      } else {\n        return {\n          name: state.user.name,\n          loggedIn: true\n        };\n      }\n    },\n    trip: (state) => state.trip,\n    searchStr: (state) => state.searchStr,\n    showNewTripDialog: (state) => state.showNewTripDialog,\n    showLoadTripDialog: (state) => state.showLoadTripDialog,\n    showPlanDialog: (state) => state.showPlanDialog,\n    showDestDialog: (state) => state.showDestDialog,\n    autocompleteService: (state) => state.autocompleteService,\n    currentPlan: (state) => state.currentPlan,\n    currentPlanIdx: (state) => state.currentPlanIdx\n  },\n  actions: {\n    setSearchStr({commit}, s) {\n      commit('setSearchStr', s);\n    },\n    setShowNewTripDialog({commit}, v) {\n      commit('setShowNewTripDialog', v);\n    },\n    setShowLoadTripDialog({commit}, v) {\n      console.log('setShowLoadTripDialog', v);\n      commit('setShowLoadTripDialog', v);\n    },\n    setShowPlanDialog({commit, state}, v) {\n      if (v === true && state.currentPlan === null) {\n        commit('setCurrentPlan', {\n          name: '',\n          travels: [],\n          itineraries: [{\n            placeId: '',\n            duration: 1\n          }],\n          mode: null\n        });\n      }\n      commit('setShowPlanDialog', v);\n    },\n    setShowDestDialog({commit}, v) {\n      commit('setShowDestDialog', v);\n    },\n    setTrip({commit}, trip) {\n      commit('setTrip', trip);\n    },\n    setCurrentPlan({commit}, p) {\n      commit('setCurrentPlan', p);\n    },\n    setCurrentPlanIdx({commit}, v) {\n      commit('setCurrentPlanIdx', v);\n    },\n\n    setPlaceService({commit}, srv) {\n      commit('setPlaceService', srv);\n    },\n    setAutocompleteService({commit}, srv) {\n      commit('setAutocompleteService', srv);\n    },\n    getPlaceDetail({state}, placeId) {\n      return new Promise(function(resolve, reject) {\n        state.placeService.getDetails({placeId: placeId, types:['(cities)']}, function(place, status) {\n          if (status == google.maps.places.PlacesServiceStatus.OK) {\n            place.placeId = place.place_id;\n            resolve(place);\n          } else {\n            reject(null);\n          }\n        })\n      })\n    }\n\n  },\n  mutations: {\n    setSearchStr(state, s) {\n      state.searchStr = s;\n    },\n    setShowNewTripDialog(state, v) {\n      state.showNewTripDialog = v;\n    },\n    setShowLoadTripDialog(state, v) {\n      console.log('???', v);\n      state.showLoadTripDialog = v;\n    },\n    setShowPlanDialog(state, v) {\n      state.showPlanDialog = v;\n    },\n    setShowDestDialog(state, v) {\n      state.showDestDialog = v;\n    },\n    setCurrentPlan(state, p) {\n      state.currentPlan = p;\n    },\n    setCurrentPlanIdx(state, v) {\n      state.currentPlanIdx = v;\n    },\n\n    setTrip(state, trip) {\n      state.trip = _.cloneDeep(trip);\n    },\n    setPlaceService(state, srv) {\n      state.placeService = srv\n    },\n    setAutocompleteService(state, srv) {\n      state.autocompleteService = srv;\n    }\n  }\n});\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","import Vue from 'vue';\nimport Vuex from 'vuex';\n\nimport App from './App.vue';\nimport store from './store';\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: h => h(App),\n  store\n}).$mount('#app')\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}